% ホントはgeometryで全部設定したかった
\RequirePackage[truedimen]{geometry}

\let\@abststudentid\@empty
\let\@absttitle\@empty
\let\@abstname\@empty
\let\@abstruby\@empty
\long\def\@abstcontent{}

\newcommand{\abststudentid}[1]{\gdef\@abststudentid{#1}}
\newcommand{\absttitle}[1]{\gdef\@absttitle{#1}}
\newcommand{\abstname}[1]{\gdef\@abstname{#1}}
\newcommand{\abstruby}[1]{\gdef\@abstruby{#1}}
\newcommand{\abstcontent}[1]{\long\gdef\@abstcontent{#1}}

\RequirePackage{setspace}
\RequirePackage{picture}
\newcommand{\ruby}[2]{$\stackrel{\hbox{\tiny #2}}{\hbox{#1}}$} %pxrubricaがあったらこっちはコメントアウト
%\RequirePackage{pxrubrica} %pxrubricaパッケージがあったらこちらを使うこと.
\newcommand{\makeabstract}{
  \thispagestyle{empty}
  \newgeometry{margin=0cm, bottom=0cm, top=0cm, footskip=0cm}
  \enlargethispage{\paperwidth}
  
  
  \begin{picture}(210truemm, 297truemm)
  
  \put(20.20truemm, 231.30truemm){\line( 1, 0){159.95truemm}}
  \put(20.20truemm,  33.20truemm){\framebox(159.95truemm, 210.90truemm){}}
  \put(20.20truemm, 209.00truemm){\line( 1, 0){159.95truemm}}
  
  \normalsize\tt\mc
  \put( 36.85truemm, 244.10truemm){\line( 0,-1){12.80truemm}}
  \put( 62.00truemm, 244.10truemm){\line( 0,-1){12.80truemm}}
  \put( 77.64truemm, 244.10truemm){\line( 0,-1){12.80truemm}}
  \put(116.55truemm, 244.10truemm){\line( 0,-1){12.80truemm}}
  \put(131.89truemm, 244.10truemm){\line( 0,-1){12.80truemm}}
  \put(28.525truemm, 237.70truemm){\makebox(0.00truemm, 0.00truemm){学 科}}
  \put(49.425truemm, 237.70truemm){\makebox(0.00truemm, 0.00truemm){情報工学}}
  \put(69.82truemm, 237.70truemm){
    \makebox(0.00truemm,  4.50truemm){学 籍}
    \makebox(0.00truemm, -4.50truemm){番 号}
  }
  \large\tt\mc
  \put(97.095truemm,  237.70truemm){\makebox(0.00truemm, 0.00truemm){\@abststudentid}}
  \normalsize\tt\mc
  \put(124.22truemm,  237.70truemm){\makebox(0.00truemm, 0.00truemm){\ruby{氏名}{ふりがな}}}
  %\put(120.55truemm,  235.00truemm){\ruby{氏名}{フリガナ}}
  \large\tt\mc
  \put(156.02truemm,  237.70truemm){\makebox(0.00truemm, 0.00truemm){\ruby{\@abstname}{\@abstruby}}}
  \normalsize\tt\mc
  \put(33.20truemm, 228.20truemm){\makebox(0.00truemm, 0.00truemm){(論文題名)}}
  \Large\tt\mc
  \put(28.20truemm, 217.85truemm){\parbox[c]{\paperwidth}{\begin{spacing}{0.8} \@absttitle \end{spacing}}}
  % 続きはputして書いてくれればおｋ
  
  \normalsize\tt\mc
  \put(35.20truemm, 206.00truemm){\makebox(0.00truemm, 0.00truemm){(内容の要旨)}}
  \put(100.175truemm,  29.20truemm){\makebox(0.00truemm, 0.00truemm){慶應義塾大学理工学部情報工学科高田研究室}}
  \huge\tt\mc
  \put(100.175truemm,  252.00truemm){\makebox(0.00truemm, 0.00truemm){論\ \ \ 文\ \ \ 要\ \ \ 旨}}
  %\put( 187.0, 247.00truemm)
  \normalsize\tt\mc
  \put(25.20truemm, 198.00truemm){
  %\fbox{\hspace{-1.0\zw} %fboxによるデバッグ開始
  \begin{minipage}[t][165.00truemm]{150truemm}
      {\setlength{\baselineskip}{12pt}{
      {\setlength{\parindent}{10pt}{
        \@abstcontent 
      \par\xdef\tpd{\the\prevdepth}
   }}}}
   \end{minipage}}
  %}%fboxによるデバッグ終わり
  %
    %{\setlength{\baselineskip}{-2pt}{
    %{\setlength{\parindent}{10pt}{ 
  %
  
  \end{picture}
  
  \restoregeometry
  \clearpage
}
